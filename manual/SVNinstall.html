<html>

<h1>2.2 Установка Flora-2 из SVN</h1>

Эта процедура значительно сложнее, чем процедура установки официальных релизов Flora-2, описанных выше. Он подходит только для пользователей, которым нужна самая последняя девелоперская версия Flora-2, либо для того, чтобы быть актуальной в отношении исправлений ошибок или для того, чтобы попробовать новые передовые функции.

<p>

Во-первых, установите последний движок XSB из http://xsb.sourceforge.net/downloads/downloads.html или из репозитория SVN XSB5. SVN-версия XSB предпочтительнее, потому что официальные выпуски иногда отстают.

<p>

Должны быть установлены исходные коды XSB. Если вы использовали установщик XSB Windows, убедитесь, что соответствующие флажки отмечены. В противном случае установщик установит только базовую систему, и последующая установка Flora-2 может завершиться неудачей.

<p>

Обратите внимание, что XSB нельзя скомпилировать в каталоге, путь которого содержит пробелы. Однако после компиляции XSB можно переместить в другой каталог, который может содержать пробелы. После переноса перекомпиляция не требуется.

<p>

Затем получите Flora-2 из ее SVN-репозитория6 в отдельный каталог за пределами дерева установки XSB. Исходники Flora-2 будут размещены в подкаталоге flora2 основной ветви разработки.

<p>

Убедитесь, что на вашем компьютере установлено стандартное программное обеспечение для разработки. В системах на основе Unix они включают компилятор GCC, Make и Autoconf. В Windows это означает Microsoft Visual Studio Express (который можно загрузить бесплатно) или полной (платной) версией Studio.

<p>

<b>Linux, Mac, BSD и т.д.</b> Настройте Flora-2 следующим образом:

<p>

<pre>
сd flora2
make clean
./makeflora all path-to-/XSB/bin/xsb
</pre>

<p>

Если исполняемый файл XSB находится в вашей переменной поиска программ  PATH, то вместо третьей команды выше вы можете просто ввести ./makeflora.

<p>

Windows. Во-первых, вам нужен nmake от Microsoft, который можно загрузить как часть бесплатного Microsoft Visual C ++ Express Edition с http://www.microsoft.com/express/vc/

<p>

По умолчанию эта программа установлена ​​в C: \ Program Files \ Microsoft Visual Studio 10.0 или аналогичной (в зависимости от текущей версии). Мы будем использовать этот каталог в наших примерах, но вы должны соответствующим образом изменить его, чтобы адаптировать к вашему конкретному случаю.

<p>

После того, как Visual C ++ Express установлен и Flora-2 получен из SVN, используйте следующие команды для настройки системы (при условии, что XSB уже установлен и настроен). Сначала перейдите в меню «Пуск», затем «Панель управления», затем «Система» (в зависимости от вашей версии Windows панель «Система» может находиться не непосредственно внутри панели управления, а на одном или двух уровнях ниже). Затем нажмите «Изменить настройки», выберите вкладку «Дополнительно» и нажмите кнопку «Переменные среды». В панели, которая теперь выбрана, выберите переменную PATH и нажмите «Изменить». В конце строки, которая представляет значение PATH, добавьте
<p>

<pre>
; C:\Program Files\Microsoft Visual Studio 10.0\VC\BIN
</pre>
<p>

Сохраните изменения. Затем настройте Flora-2 следующим образом:
<p>

<pre>
cd flora2
makeflora clean
makeflora путь-to-\XSB\bin\xsb.bat
</pre>

<p>

Здесь flora2 является корневым каталогом для Flora-2 в вашей выгрузке SVN; Он должен иметь форму \ flora2. Аргумент path-for-\ XSB \ bin \ xsb.bat должен быть полным именем пути для скрипта вызова XSB. Обратите внимание, что в отличие от Unix не должно быть ключевого слова «all» в версии Windows команды makeflora.

<p>

64-разрядная версия: если вы скомпилировали XSB как 64-разрядное приложение, используйте xsb64.bat выше, а не xsb.bat.

<p>

Может быть полезно установить переменную среды HOME в вашей системе Windows на какой-либо каталог, доступный из вашей учетной записи. XSB и Flora-2 будут размещать различные вспомогательные файлы в подпапке .xsb в этом каталоге. Если HOME не установлен, XSB будет использовать местоположение, указанное в системной переменной USERPROFILE.

<p>

Если вы разработчик и хотите перекомпилировать C-часть Flora-2, тогда вы можете ввести makeflora -c path-for- \ XSB \ bin \ xsb.bat

<p>

Однако, как правило, нет необходимости выполнять этот шаг. Для работы «makeflore -c» иногда необходимо найти файл vcvars32.bat, как правило, в

<p>

C:\Program Files\Microsoft Visual Studio 10.0\VC\BIN

<p>

И выполнить этот командный файл в командном окне, где должен быть запущен makeflora -c. Однако этот последний шаг не был необходим в Visual C ++ Express 10.0.

<p>

64-разрядная версия. Если вы используете 64-разрядную версию XSB в Windows и хотите перекомпилировать C-часть Flora-2, вы должны использовать команду makeflora -c64 вместо makeflora -c. Также используйте xsb64.bat вместо xsb.bat. В этом случае вам нужно найти файл vcvarsx86_amd64.bat или SetEnv.cmd в Visual Studio и выполнить его. Однако, как уже отмечалось, эта перекомпиляция не нужна, если вы не изменили части Flora-2, написанные на языке C.

<p>

Примечание: Flora-2 не работает в последних версиях Cygwin из-за проблемы с вызовами XSB внешних процедур C в Cygwin.
